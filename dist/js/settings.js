!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";function n(){return{Series:[]}}function o(){return"cloudBackup_Local"}function a(e){u(e,"abSeriesKeeperSettings",e.getLocalStorageType(),e.getEmptyObject())}function i(e,t){l("abSeriesKeeperSettings",JSON.stringify(e,null,2),t,e)}function c(e,t){let r="abSeriesKeeper",n=t.getStorageType();"cloudBackup_Local"==t.getStorageType()?r="abSeriesKeeper_ChromeCloudBackup":"chrome_sync"==t.getStorageType()&&1==t.getSyncCrash()&&(r="abSeriesKeeper_ChromeCloudBackup",n="cloudBackup_Local"),u(e,r,n,{Series:[]})}function s(e,t){let r="abSeriesKeeper",n=JSON.stringify(e,null,2);"chrome_sync"==t.getStorageType()?l("abSeriesKeeper_ChromeCloudBackup",n,"cloudBackup_Local"):"cloudBackup_Local"==t.getStorageType()&&(r="abSeriesKeeper_ChromeCloudBackup"),l(r,n,t.getStorageType(),t)}function l(e,t,r,n){switch(r){case"local":localStorage.setItem(e,t);break;case"chrome_local":chrome.storage.local.clear(),chrome.storage.local.set({[e]:t});break;case"chrome_sync":let r=function(e,t){const r=Math.ceil(e.length/t),n=new Array(r);for(let o=0,a=0;o<r;++o,a+=t)n[o]=e.substr(a,t);return n}(t,4e3);chrome.storage.sync.clear();const o=e=>new Promise((t,r)=>{chrome.storage.sync.set(e,()=>{chrome.runtime.lastError?r():t()})});Promise.all(r.map((t,r)=>o({[e+"_"+r]:t}))).then(()=>{0!=n.getSyncCrash()&&(n.setSyncCrash(!1),i(n.dataObject,n.getLocalStorageType()))}).catch(()=>{!function(e){let t="Chrome cloud operations quota exceeded, cloud data deleted! The list will be restored from a local backup.",r=console.log(t);0==e.getSyncCrash()&&(e.setSyncCrash(!0),i(e.dataObject,e.getLocalStorageType()));r=alert(t)}(n)});break;case"cloudBackup_Local":localStorage.setItem(e,t)}}function u(e,t,r,n={}){switch(r){case"local":g(e,localStorage.getItem(t),n);break;case"chrome_local":chrome.storage.local.get([t],r=>{g(e,r[t],n)});break;case"chrome_sync":chrome.storage.sync.get(r=>{let o="",a=Object.keys(r).length,i=0;for(;i<a;)o+=r[t+"_"+i],i++;g(e,o,n)});break;case"cloudBackup_Local":g(e,localStorage.getItem(t),n)}return JSON.parse(localStorage.getItem(t))}function g(e,t,r){let n;try{n=JSON.parse(t)}catch{n=r}e.dataObject=n}function d(){chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open(chrome.runtime.getURL("settings.html"))}function h(e,t){let r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function p(e,t){h(t,JSON.stringify(e))}function m(e){if(window.File&&window.FileReader&&window.FileList&&window.Blob){let t=document.createElement("input");t.type="file",t.onchange=t=>{let r=t.target.files[0],n=new FileReader;n.readAsText(r,"UTF-8"),n.onload=t=>{let r=t.target.result;e.importList(r)}},t.click()}else alert("The File APIs are not fully supported in this browser.")}r.r(t),r.d(t,"getEmptyObjList",(function(){return n})),r.d(t,"getBackupStorageType",(function(){return o})),r.d(t,"loadAppSettings",(function(){return a})),r.d(t,"saveAppSettings",(function(){return i})),r.d(t,"loadObjectListFromStorage",(function(){return c})),r.d(t,"saveObjectList",(function(){return s})),r.d(t,"appSettingsOpen",(function(){return d})),r.d(t,"download",(function(){return h})),r.d(t,"exportObject",(function(){return p})),r.d(t,"fileSelectButtonClick",(function(){return m}))},function(e,t,r){"use strict";function n(e,t,r,n){let o=function(e,t,r){let n=r-t,o=100;0==!n&&(o=(e-t)/n*100);return o}(t,r,n),a=e[0],s=e[1],l=e[2];return c(i(o,a.start,a.end),i(o,s.start,s.end),i(o,l.start,l.end))}function o(e){return c(e[0].start,e[1].start,e[2].start)}function a(e){return c(e[0].end,e[1].end,e[2].end)}function i(e,t,r){return e*(r-t)/100+t}function c(e,t,r){let n=u(e/=240,t/=240,r/=240);return"#"+("000000"+(65536*n[0]+256*n[1]+1*n[2]).toString(16)).slice(-6)}function s(e){let t=l(e);return d(t[0],t[1],t[2])}function l(e){return e=e.replace("#",""),[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function u(e,t,r){let n,o,a;if(0==t)n=o=a=r;else{let i=r<.5?r*(1+t):r+t-r*t,c=2*r-i;n=g(c,i,e+1/3),o=g(c,i,e),a=g(c,i,e-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*a)]}function g(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function d(e,t,r){e/=255,t/=255,r/=255;let n,o,a=Math.max(e,t,r),i=Math.min(e,t,r),c=(a+i)/2;if(a==i)n=o=0;else{let s=a-i;switch(o=c>.5?s/(2-a-i):s/(a+i),a){case e:n=(t-r)/s+(t<r?6:0);break;case t:n=(r-e)/s+2;break;case r:n=(e-t)/s+4}n/=6}return n=Math.round(240*n),o=Math.round(240*o),c=Math.round(240*c),[n,o,c]}r.r(t),r.d(t,"getColorByHSLRange",(function(){return n})),r.d(t,"getStartColorFromParam",(function(){return o})),r.d(t,"getEndColorFromParam",(function(){return a})),r.d(t,"hslToHEX",(function(){return c})),r.d(t,"hexToHSL",(function(){return s})),r.d(t,"hexToRGB",(function(){return l})),r.d(t,"hslToRgb",(function(){return u})),r.d(t,"hue2rgb",(function(){return g})),r.d(t,"rgbToHsl",(function(){return d}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e=this.getEmptyObject()){this._dataProvider,this._updateListeners=[],this.dataObject=e}get dataObject(){return this._dataObject}set dataObject(e){this._dataObject||(this._dataObject=this.getEmptyObject()),this.setObjSettings(e),this.callListenersFunctions()}get dataProvider(){return this._dataProvider}set dataProvider(e){this._dataProvider=e}addUpdateListenersFunctions(...e){this._updateListeners=this._updateListeners.concat(e)}callListenersFunctions(){this._updateListeners.forEach(e=>e())}getEmptyObject(){return{}}setObjSettings(e){if(e)for(const[t,r]of Object.entries(e))e.hasOwnProperty(t)?this._dataObject[t]=r:this.setObjValueByKey(t)}setObjValueByKey(e){switch(e){case"StorageType":objData.StorageType=this.getStorageType();break;case"ScrollToActive":objData.ScrollToActive=this.getScrollToActive();break;case"AgeingColorScheme":objData.AgeingColorScheme=this.getAgeingColorScheme();break;case 0!==objData.AgeingPeriod:objData.AgeingPeriod=this.getAgeingPeriod()}}getStorageType(){let e=this.getLocalStorageType();return this.getObjSettingsByName("StorageType",e)}getLocalStorageType(){return"local"}setStorageType(e){this.dataObject.StorageType=e}isCurrentStorageClosed(){return this.getStorageType()===this.dataProvider.getBackupStorageType()}getSyncCrash(){return this.getObjSettingsByName("SyncCrash",!1)}setSyncCrash(e){1==e?this.dataObject.SyncCrash=e:this.dataObject.hasOwnProperty("SyncCrash")&&(delete this.dataObject.SyncCrash,this.callListenersFunctions())}getScrollToActive(){return this.getObjSettingsByName("ScrollToActive",!0)}setScrollToActive(e){this.dataObject.ScrollToActive=e}getAgeingColorScheme(){return this.getObjSettingsByName("AgeingColorScheme",[{start:60,end:40},{start:215,end:240},{start:122,end:230}])}setAgeingColorScheme(e){this.dataObject.AgeingColorScheme=e}getAgeingPeriod(){return this.getObjSettingsByName("AgeingPeriod",0)}setAgeingPeriod(e){this.dataObject.AgeingPeriod=e}getObjSettingsByName(e,t){let r,n=this.dataObject;return r=n&&n.hasOwnProperty(e)?n[e]:t,r}}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(1);let a=new(r(2).a),i=new class{constructor(){this._appSettings,this._name="testPageClass"}get appSettings(){return this._appSettings}set appSettings(e){this._appSettings=e;this._appSettings.addUpdateListenersFunctions(()=>{this.refreshDom()})}refreshDom(){this.refreshStorageType(this.appSettings.getStorageType()),this.refreshAgeingPeriod(this.appSettings.getAgeingPeriod()),this.refreshScrollToActive(this.appSettings.getScrollToActive()),this.refreshColorScheme()}refreshStorageType(e){document.getElementById("storageType").value=e,this.setStorageWarningMessage()}refreshScrollToActive(e){document.getElementById("isAutoScroll").checked=e}refreshAgeingPeriod(e){document.getElementById("ageingPeriod").value=e}refreshColorScheme(){let e=this.appSettings.getAgeingColorScheme();e&&(document.getElementById("beginColorPicker").value=o.getStartColorFromParam(e),document.getElementById("endColorPicker").value=o.getEndColorFromParam(e),this.setGradientViewer())}setGradientViewer(){let e=document.getElementById("beginColorPicker").value,t=document.getElementById("endColorPicker").value;document.getElementById("gradientExampleString").style.background="linear-gradient(90deg, "+e+", "+t+")"}setStorageWarningMessage(){let e=document.getElementById("storageTypeWarning"),t="";switch(a.getStorageType()){case"chrome_sync":t="This storage is in test mode. There is a risk of losing all data, use it with manual backup!";break;case"cloudBackup_Local":t='It is a local backup list for "chrome cloud" storage. This list will be overwritten with any changes to the cloud storage!'}e.innerHTML=t}};function c(){i.setGradientViewer()}function s(e){let t,r,n;for(r=document.getElementsByClassName("tabcontent"),t=0;t<r.length;t++)r[t].style.display="none";for(n=document.getElementsByClassName("tablinks"),t=0;t<n.length;t++)n[t].className=n[t].className.replace(" active","");document.getElementById("tab"+e).style.display="block",document.getElementById("btn"+e).className+=" active"}!function(){i.appSettings=a,a.dataProvider=n,n.loadAppSettings(a),document.getElementById("btnGlobal").addEventListener("click",()=>{s("Global")},!1),document.getElementById("btnInfo").addEventListener("click",()=>{s("Info")},!1),document.getElementById("btnAbout").addEventListener("click",()=>{s("About")},!1),document.getElementById("storageType").addEventListener("change",e=>{return t=e.currentTarget.value,a.setStorageType(t),n.saveAppSettings(a.dataObject,a.getLocalStorageType()),void i.setStorageWarningMessage();var t}),document.getElementById("isAutoScroll").addEventListener("change",e=>{return t=e.currentTarget.checked,a.setScrollToActive(t),void n.saveAppSettings(a.dataObject,a.getLocalStorageType());var t}),document.getElementById("btnAgeingSave").addEventListener("click",()=>function(){a.setAgeingPeriod(document.getElementById("ageingPeriod").value);let e=o.hexToHSL(document.getElementById("beginColorPicker").value),t=o.hexToHSL(document.getElementById("endColorPicker").value),r=[{start:e[0],end:t[0]},{start:e[1],end:t[1]},{start:e[2],end:t[2]}];a.setAgeingColorScheme(r),n.saveAppSettings(a.dataObject,a.getLocalStorageType())}());let e=document.getElementsByClassName("colorSelector");Array.from(e).forEach(e=>{e.addEventListener("change",c,!1)})}(),s("Global")}]);